# Docker Compose Override for Development
# Development helpers: mount source, persist site-packages, and auto-install deps on first start

services:
  backend:
    volumes:
      - ./apps/backend/app:/app/app
      - ./apps/backend/alembic:/app/alembic
      - ./apps/backend/scripts:/app/scripts
      # Note: do not bind-mount start.sh to avoid exec format / permission issues on Windows
      # - ./apps/backend/start.sh:/app/start.sh:ro
      - ./apps/backend/pyproject.toml:/app/pyproject.toml:ro
      - ./apps/backend/poetry.lock:/app/poetry.lock:ro
      - backend-site-packages:/usr/local/lib/python3.11/site-packages

volumes:
  backend-site-packages:
