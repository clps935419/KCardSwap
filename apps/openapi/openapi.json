{
  "openapi": "3.1.0",
  "info": {
    "title": "KCardSwap API",
    "description": "Backend API for KCardSwap - Card Exchange Platform",
    "version": "0.1.0"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint for container orchestration.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "Api Health Check",
        "description": "API health check endpoint.",
        "operationId": "api_health_check_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/admin-login": {
      "post": {
        "tags": [
          "Authentication",
          "Admin"
        ],
        "summary": "Admin login with email/password",
        "description": "Authenticate admin user with email and password. Only users with admin or super_admin role can login.",
        "operationId": "admin_login_api_v1_auth_admin_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated as admin",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials or not an admin",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login with Google",
        "description": "Authenticate user with Google OAuth token and receive JWT tokens",
        "operationId": "google_login_api_v1_auth_google_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Invalid Google token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-callback": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Google OAuth Callback with PKCE",
        "description": "Authenticate user with Google OAuth authorization code and PKCE code_verifier (Expo AuthSession)",
        "operationId": "google_callback_api_v1_auth_google_callback_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleCallbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Invalid authorization code or code_verifier",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Token exchange failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token",
        "description": "Use refresh token to obtain new access and refresh tokens",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully refreshed tokens",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/profile/me": {
      "get": {
        "tags": [
          "Profile"
        ],
        "summary": "Get my profile",
        "description": "Retrieve the authenticated user's profile information",
        "operationId": "get_my_profile_api_v1_profile_me_get",
        "responses": {
          "200": {
            "description": "Successfully retrieved profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileErrorWrapper"
                }
              }
            }
          },
          "404": {
            "description": "Profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileErrorWrapper"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Profile"
        ],
        "summary": "Update my profile",
        "description": "Update the authenticated user's profile information",
        "operationId": "update_my_profile_api_v1_profile_me_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully updated profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileErrorWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileErrorWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/cards/upload-url": {
      "post": {
        "tags": [
          "Cards"
        ],
        "summary": "Get upload signed URL",
        "description": "Generate a signed URL for uploading a card image to GCS",
        "operationId": "get_upload_url_api_v1_cards_upload_url_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UploadCardRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Upload URL generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadUrlResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (file type/size)"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Quota exceeded"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/cards/me": {
      "get": {
        "tags": [
          "Cards"
        ],
        "summary": "Get my cards",
        "description": "Retrieve all cards owned by the authenticated user",
        "operationId": "get_my_cards_api_v1_cards_me_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status (available/trading/traded)",
              "title": "Status Filter"
            },
            "description": "Filter by status (available/trading/traded)"
          }
        ],
        "responses": {
          "200": {
            "description": "Cards retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CardResponse"
                  },
                  "title": "Response Get My Cards Api V1 Cards Me Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cards/{card_id}": {
      "delete": {
        "tags": [
          "Cards"
        ],
        "summary": "Delete a card",
        "description": "Delete a card owned by the authenticated user",
        "operationId": "delete_card_api_v1_cards__card_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "card_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Card Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Card deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Not the card owner"
          },
          "404": {
            "description": "Card not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cards/quota/status": {
      "get": {
        "tags": [
          "Cards"
        ],
        "summary": "Get quota status",
        "description": "Check current upload quota usage",
        "operationId": "get_quota_status_api_v1_cards_quota_status_get",
        "responses": {
          "200": {
            "description": "Quota status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuotaStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/nearby/search": {
      "post": {
        "tags": [
          "Nearby Search"
        ],
        "summary": "Search for nearby cards",
        "description": "Search for cards near a specific location. Free users: 5 searches/day. Premium users: unlimited.",
        "operationId": "search_nearby_cards_api_v1_nearby_search_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchNearbyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Search successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchNearbyResponse"
                },
                "example": {
                  "results": [
                    {
                      "card_id": "123e4567-e89b-12d3-a456-426614174000",
                      "owner_id": "987e6543-e21b-12d3-a456-426614174000",
                      "distance_km": 2.5,
                      "idol": "IU",
                      "idol_group": "Solo",
                      "album": "Lilac",
                      "version": "Standard",
                      "rarity": "rare",
                      "image_url": "https://storage.googleapis.com/kcardswap/cards/...",
                      "owner_nickname": "CardCollector123"
                    }
                  ],
                  "count": 1
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Daily search limit exceeded: 5/5 searches used"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/nearby/location": {
      "put": {
        "tags": [
          "Nearby Search"
        ],
        "summary": "Update user location",
        "description": "Update the user's current location for nearby search visibility",
        "operationId": "update_user_location_api_v1_nearby_location_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLocationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Location updated successfully"
          },
          "400": {
            "description": "Invalid coordinates"
          },
          "404": {
            "description": "User profile not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AdminLoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Admin email address"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "Admin password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "AdminLoginRequest",
        "description": "Request schema for admin login with email/password"
      },
      "CardResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Card ID"
          },
          "owner_id": {
            "type": "string",
            "format": "uuid",
            "title": "Owner Id",
            "description": "Owner user ID"
          },
          "idol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name"
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group"
          },
          "album": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Album",
            "description": "Album name"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "Version"
          },
          "rarity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rarity",
            "description": "Card rarity"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Card status"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url",
            "description": "Image URL"
          },
          "size_bytes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size Bytes",
            "description": "Image size in bytes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "owner_id",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "CardResponse",
        "description": "Response schema for card details",
        "example": {
          "album": "Love Poem",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "idol": "IU",
          "idol_group": "Solo",
          "image_url": "https://storage.googleapis.com/bucket/cards/user_id/card_id.jpg",
          "owner_id": "987e6543-e21b-12d3-a456-426614174000",
          "rarity": "rare",
          "size_bytes": 1234567,
          "status": "available",
          "updated_at": "2024-01-01T00:00:00Z",
          "version": "Version A"
        }
      },
      "ErrorWrapper": {
        "properties": {
          "data": {
            "type": "null",
            "title": "Data"
          },
          "error": {
            "$ref": "#/components/schemas/app__modules__identity__presentation__schemas__profile_schemas__ErrorResponse"
          }
        },
        "type": "object",
        "required": [
          "error"
        ],
        "title": "ErrorWrapper",
        "description": "Error wrapper response"
      },
      "GoogleCallbackRequest": {
        "properties": {
          "code": {
            "type": "string",
            "minLength": 1,
            "title": "Code",
            "description": "Authorization code from Google OAuth"
          },
          "code_verifier": {
            "type": "string",
            "maxLength": 128,
            "minLength": 43,
            "title": "Code Verifier",
            "description": "PKCE code verifier used during authorization request"
          },
          "redirect_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Redirect Uri",
            "description": "Redirect URI used during authorization (must match the one used in auth request)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "code_verifier"
        ],
        "title": "GoogleCallbackRequest",
        "description": "Request schema for Google OAuth callback with PKCE (Expo AuthSession)"
      },
      "GoogleLoginRequest": {
        "properties": {
          "google_token": {
            "type": "string",
            "minLength": 1,
            "title": "Google Token",
            "description": "Google ID token received from Google OAuth"
          }
        },
        "type": "object",
        "required": [
          "google_token"
        ],
        "title": "GoogleLoginRequest",
        "description": "Request schema for Google login"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LoginResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/TokenResponse"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "LoginResponse",
        "description": "Response wrapper for successful login"
      },
      "NearbyCardResponse": {
        "properties": {
          "card_id": {
            "type": "string",
            "format": "uuid",
            "title": "Card Id",
            "description": "Card unique identifier"
          },
          "owner_id": {
            "type": "string",
            "format": "uuid",
            "title": "Owner Id",
            "description": "Card owner's user ID"
          },
          "distance_km": {
            "type": "number",
            "title": "Distance Km",
            "description": "Distance from search origin in kilometers"
          },
          "idol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name"
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group name"
          },
          "album": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Album",
            "description": "Album name"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "Card version"
          },
          "rarity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rarity",
            "description": "Card rarity"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url",
            "description": "Card image URL"
          },
          "owner_nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner Nickname",
            "description": "Owner's nickname"
          }
        },
        "type": "object",
        "required": [
          "card_id",
          "owner_id",
          "distance_km"
        ],
        "title": "NearbyCardResponse",
        "description": "Response schema for a nearby card result",
        "example": {
          "album": "Lilac",
          "card_id": "123e4567-e89b-12d3-a456-426614174000",
          "distance_km": 2.5,
          "idol": "IU",
          "idol_group": "Solo",
          "image_url": "https://storage.googleapis.com/kcardswap/cards/...",
          "owner_id": "987e6543-e21b-12d3-a456-426614174000",
          "owner_nickname": "CardCollector123",
          "rarity": "rare",
          "version": "Standard"
        }
      },
      "ProfileErrorWrapper": {
        "properties": {
          "data": {
            "type": "null",
            "title": "Data"
          },
          "error": {
            "$ref": "#/components/schemas/app__modules__identity__presentation__schemas__profile_schemas__ErrorResponse"
          }
        },
        "type": "object",
        "required": [
          "error"
        ],
        "title": "ProfileErrorWrapper",
        "description": "Error wrapper for profile endpoints"
      },
      "ProfileResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Profile ID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Profile creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Profile last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "created_at",
          "updated_at"
        ],
        "title": "ProfileResponse",
        "description": "Response schema for user profile",
        "example": {
          "avatar_url": "https://example.com/avatar.jpg",
          "bio": "Love collecting K-pop cards!",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "987e6543-e21b-12d3-a456-426614174000",
          "nickname": "CardCollector",
          "preferences": {
            "language": "ko",
            "theme": "dark"
          },
          "privacy_flags": {
            "allow_stranger_chat": false,
            "nearby_visible": true,
            "show_online": true
          },
          "region": "Seoul",
          "updated_at": "2024-01-15T12:30:00Z",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "ProfileResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProfileResponse"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ProfileResponseWrapper",
        "description": "Response wrapper for profile data"
      },
      "QuotaStatusResponse": {
        "properties": {
          "uploads_today": {
            "type": "integer",
            "title": "Uploads Today",
            "description": "Number of uploads today"
          },
          "daily_limit": {
            "type": "integer",
            "title": "Daily Limit",
            "description": "Daily upload limit"
          },
          "remaining_uploads": {
            "type": "integer",
            "title": "Remaining Uploads",
            "description": "Remaining uploads for today"
          },
          "storage_used_bytes": {
            "type": "integer",
            "title": "Storage Used Bytes",
            "description": "Total storage used in bytes"
          },
          "storage_limit_bytes": {
            "type": "integer",
            "title": "Storage Limit Bytes",
            "description": "Storage limit in bytes"
          },
          "remaining_storage_bytes": {
            "type": "integer",
            "title": "Remaining Storage Bytes",
            "description": "Remaining storage in bytes"
          },
          "storage_used_mb": {
            "type": "number",
            "title": "Storage Used Mb",
            "description": "Storage used in MB"
          },
          "storage_limit_mb": {
            "type": "number",
            "title": "Storage Limit Mb",
            "description": "Storage limit in MB"
          },
          "remaining_storage_mb": {
            "type": "number",
            "title": "Remaining Storage Mb",
            "description": "Remaining storage in MB"
          }
        },
        "type": "object",
        "required": [
          "uploads_today",
          "daily_limit",
          "remaining_uploads",
          "storage_used_bytes",
          "storage_limit_bytes",
          "remaining_storage_bytes",
          "storage_used_mb",
          "storage_limit_mb",
          "remaining_storage_mb"
        ],
        "title": "QuotaStatusResponse",
        "description": "Response schema for quota status",
        "example": {
          "daily_limit": 2,
          "remaining_storage_bytes": 1068498944,
          "remaining_storage_mb": 1019.0,
          "remaining_uploads": 1,
          "storage_limit_bytes": 1073741824,
          "storage_limit_mb": 1024.0,
          "storage_used_bytes": 5242880,
          "storage_used_mb": 5.0,
          "uploads_today": 1
        }
      },
      "RefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "minLength": 1,
            "title": "Refresh Token",
            "description": "Refresh token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshTokenRequest",
        "description": "Request schema for refreshing access token"
      },
      "SearchNearbyRequest": {
        "properties": {
          "lat": {
            "type": "number",
            "maximum": 90.0,
            "minimum": -90.0,
            "title": "Lat",
            "description": "Latitude (-90 to 90)"
          },
          "lng": {
            "type": "number",
            "maximum": 180.0,
            "minimum": -180.0,
            "title": "Lng",
            "description": "Longitude (-180 to 180)"
          },
          "radius_km": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 100.0,
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Radius Km",
            "description": "Search radius in kilometers (max 100km)"
          }
        },
        "type": "object",
        "required": [
          "lat",
          "lng"
        ],
        "title": "SearchNearbyRequest",
        "description": "Request schema for nearby card search"
      },
      "SearchNearbyResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/NearbyCardResponse"
            },
            "type": "array",
            "title": "Results",
            "description": "List of nearby cards"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of results returned"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "SearchNearbyResponse",
        "description": "Response schema for nearby search results",
        "example": {
          "count": 1,
          "results": [
            {
              "album": "Lilac",
              "card_id": "123e4567-e89b-12d3-a456-426614174000",
              "distance_km": 2.5,
              "idol": "IU",
              "idol_group": "Solo",
              "image_url": "https://storage.googleapis.com/kcardswap/cards/...",
              "owner_id": "987e6543-e21b-12d3-a456-426614174000",
              "owner_nickname": "CardCollector123",
              "rarity": "rare",
              "version": "Standard"
            }
          ]
        }
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration in seconds"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email"
          },
          "role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role",
            "description": "User role (only for admin users)"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in",
          "user_id",
          "email"
        ],
        "title": "TokenResponse",
        "description": "Response schema for authentication tokens",
        "example": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "email": "user@example.com",
          "expires_in": 900,
          "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "role": "admin",
          "token_type": "bearer",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "UpdateLocationRequest": {
        "properties": {
          "lat": {
            "type": "number",
            "maximum": 90.0,
            "minimum": -90.0,
            "title": "Lat",
            "description": "Latitude (-90 to 90)"
          },
          "lng": {
            "type": "number",
            "maximum": 180.0,
            "minimum": -180.0,
            "title": "Lng",
            "description": "Longitude (-180 to 180)"
          }
        },
        "type": "object",
        "required": [
          "lat",
          "lng"
        ],
        "title": "UpdateLocationRequest",
        "description": "Request schema for updating user location"
      },
      "UpdateProfileRequest": {
        "properties": {
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          }
        },
        "type": "object",
        "title": "UpdateProfileRequest",
        "description": "Request schema for updating user profile",
        "example": {
          "bio": "Updated bio",
          "nickname": "NewNickname",
          "privacy_flags": {
            "allow_stranger_chat": true,
            "nearby_visible": true,
            "show_online": false
          }
        }
      },
      "UploadCardRequest": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "MIME type of the file (image/jpeg or image/png)",
            "examples": [
              "image/jpeg",
              "image/png"
            ]
          },
          "file_size_bytes": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "File Size Bytes",
            "description": "Size of file in bytes",
            "examples": [
              1234567
            ]
          },
          "idol": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name"
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group"
          },
          "album": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Album",
            "description": "Album name"
          },
          "version": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "Version"
          },
          "rarity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rarity",
            "description": "Card rarity",
            "examples": [
              "common",
              "rare",
              "epic",
              "legendary"
            ]
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "file_size_bytes"
        ],
        "title": "UploadCardRequest",
        "description": "Request schema for getting upload signed URL",
        "example": {
          "album": "Love Poem",
          "content_type": "image/jpeg",
          "file_size_bytes": 1234567,
          "idol": "IU",
          "idol_group": "Solo",
          "rarity": "rare",
          "version": "Version A"
        }
      },
      "UploadUrlResponse": {
        "properties": {
          "upload_url": {
            "type": "string",
            "title": "Upload Url",
            "description": "Signed URL for uploading"
          },
          "method": {
            "type": "string",
            "title": "Method",
            "description": "HTTP method to use",
            "examples": [
              "PUT"
            ]
          },
          "required_headers": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Required Headers",
            "description": "Required headers for upload"
          },
          "image_url": {
            "type": "string",
            "title": "Image Url",
            "description": "Public URL of the image after upload"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "When the signed URL expires"
          },
          "card_id": {
            "type": "string",
            "format": "uuid",
            "title": "Card Id",
            "description": "ID of the created card"
          }
        },
        "type": "object",
        "required": [
          "upload_url",
          "method",
          "required_headers",
          "image_url",
          "expires_at",
          "card_id"
        ],
        "title": "UploadUrlResponse",
        "description": "Response schema for upload signed URL",
        "example": {
          "card_id": "123e4567-e89b-12d3-a456-426614174000",
          "expires_at": "2025-01-01T00:15:00Z",
          "image_url": "https://storage.googleapis.com/bucket/cards/user_id/card_id.jpg",
          "method": "PUT",
          "required_headers": {
            "Content-Type": "image/jpeg"
          },
          "upload_url": "https://storage.googleapis.com/bucket/path?signature=..."
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "app__modules__identity__presentation__schemas__profile_schemas__ErrorResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Error code"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Error message"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional error details"
          }
        },
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "title": "ErrorResponse",
        "description": "Error response schema"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}