{
  "openapi": "3.1.0",
  "info": {
    "title": "KCardSwap API",
    "description": "Backend API for KCardSwap - Card Exchange Platform",
    "version": "0.1.0"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint for container orchestration.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "Api Health Check",
        "description": "API health check endpoint.",
        "operationId": "api_health_check_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/admin-login": {
      "post": {
        "tags": [
          "Authentication",
          "Admin"
        ],
        "summary": "Admin login with email/password",
        "description": "Authenticate admin user with email and password. Only users with admin or super_admin role can login.",
        "operationId": "admin_login_api_v1_auth_admin_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated as admin",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid credentials or not an admin"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login with Google",
        "description": "Authenticate user with Google OAuth token and receive JWT tokens",
        "operationId": "google_login_api_v1_auth_google_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid Google token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-callback": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Google OAuth Callback with PKCE",
        "description": "Authenticate user with Google OAuth authorization code and PKCE code_verifier (Expo AuthSession)",
        "operationId": "google_callback_api_v1_auth_google_callback_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleCallbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid authorization code or code_verifier"
          },
          "422": {
            "description": "Token exchange failed"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token (cookie-based)",
        "description": "Use refresh token from httpOnly cookie to obtain new access and refresh tokens",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "parameters": [
          {
            "name": "refresh_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Refresh Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully refreshed tokens",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshSuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/profile/me": {
      "get": {
        "tags": [
          "Profile"
        ],
        "summary": "Get my profile",
        "description": "Retrieve the authenticated user's profile information",
        "operationId": "get_my_profile_api_v1_profile_me_get",
        "responses": {
          "200": {
            "description": "Successfully retrieved profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Profile not found"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Profile"
        ],
        "summary": "Update my profile",
        "description": "Update the authenticated user's profile information",
        "operationId": "update_my_profile_api_v1_profile_me_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully updated profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/friends/block": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Block a user",
        "description": "Block a user to prevent interaction. Required for FR-025 (blocking support).",
        "operationId": "block_user_api_v1_friends_block_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlockUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Block User Api V1 Friends Block Post"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/friends/unblock": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Unblock a user",
        "description": "Unblock a previously blocked user. Required for FR-025.",
        "operationId": "unblock_user_api_v1_friends_unblock_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnblockUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Unblock User Api V1 Friends Unblock Post"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/reports": {
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Get my reports",
        "description": "Get reports submitted by the current user",
        "operationId": "get_my_reports_api_v1_reports_get",
        "responses": {
          "200": {
            "description": "Reports retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "500": {
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Reports"
        ],
        "summary": "Submit report",
        "description": "Submit a report for inappropriate behavior or content",
        "operationId": "submit_report_api_v1_reports_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Report submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (validation failed)"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "422": {
            "description": "Unprocessable entity (cannot report user)"
          },
          "500": {
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/posts": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Create a new post (V2: with scope/category)",
        "description": "Create a new post. Requires authentication. Free users limited to 2 posts per day, Premium to 20.",
        "operationId": "create_post_api_v1_posts_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePostRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Post created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (validation failed)"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "422": {
            "description": "Unprocessable entity (daily limit exceeded or validation failed)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "List posts (V2: global/city filtering with category)",
        "description": "List posts. FR-005: Global view (no city_code) shows all posts; City view (with city_code) shows city-specific posts.",
        "operationId": "list_posts_api_v1_posts_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "city_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional city filter (omit for global view)",
              "title": "City Code"
            },
            "description": "Optional city filter (omit for global view)"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/PostCategory"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional category filter",
              "title": "Category"
            },
            "description": "Optional category filter"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Posts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/interest": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Express interest in a post",
        "description": "Express interest in a post. Cannot express interest in your own post or duplicate interests.",
        "operationId": "express_interest_api_v1_posts__post_id__interest_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Interest expressed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostInterestResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "404": {
            "description": "Post not found"
          },
          "422": {
            "description": "Unprocessable entity (validation failed)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/interests/{interest_id}/accept": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Accept an interest",
        "description": "Accept an interest. Automatically creates friendship and chat room.",
        "operationId": "accept_interest_api_v1_posts__post_id__interests__interest_id__accept_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "interest_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Interest Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Interest accepted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptInterestResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post or interest not found"
          },
          "422": {
            "description": "Unprocessable entity (validation failed)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/interests/{interest_id}/reject": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Reject an interest",
        "description": "Reject an interest. Only post owner can reject.",
        "operationId": "reject_interest_api_v1_posts__post_id__interests__interest_id__reject_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "interest_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Interest Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Interest rejected successfully"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post or interest not found"
          },
          "422": {
            "description": "Unprocessable entity (validation failed)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/close": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Close a post",
        "description": "Manually close a post. Only post owner can close.",
        "operationId": "close_post_api_v1_posts__post_id__close_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Post closed successfully"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post not found"
          },
          "422": {
            "description": "Unprocessable entity (post not open)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/interests": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "List interests for a post (owner only)",
        "description": "List all interests for a specific post. Only post owner can view.",
        "operationId": "list_post_interests_api_v1_posts__post_id__interests_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Interests retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostInterestListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/interests/{interest_id}": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Get a specific interest (owner only)",
        "description": "Get details of a specific interest. Only post owner can view.",
        "operationId": "get_post_interest_api_v1_posts__post_id__interests__interest_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "interest_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Interest Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Interest retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostInterestResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post or interest not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/like": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Toggle like on a post (FR-008, FR-009)",
        "description": "Like or unlike a post. Idempotent: if already liked, unlikes; if not liked, likes. Each user can like a post at most once.",
        "operationId": "toggle_like_api_v1_posts__post_id__like_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Like toggled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToggleLikeResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "404": {
            "description": "Post not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/cities": {
      "get": {
        "tags": [
          "locations"
        ],
        "summary": "Get all Taiwan cities",
        "description": "Get a list of all available Taiwan cities/counties.\n\n    This endpoint provides the complete list of Taiwan's 22 cities/counties including:\n    - **Six Special Municipalities** (直轄市): Taipei, New Taipei, Taoyuan, Taichung, Tainan, Kaohsiung\n    - **Provincial Cities** (省轄市): Hsinchu City, Chiayi City\n    - **Counties** (縣): Hsinchu County, Miaoli, Changhua, Nantou, Yunlin, Chiayi County, Pingtung, Yilan, Hualien, Taitung, Penghu, Kinmen, Lienchiang\n\n    Each city includes:\n    - `code`: City code used in APIs (e.g., TPE, NTP, TAO)\n    - `name`: English name (e.g., Taipei City)\n    - `name_zh`: Chinese name (e.g., 台北市)\n\n    This is a public endpoint that **does not require authentication**.\n    Frontend applications should use this to dynamically populate city selection dropdowns.",
        "operationId": "get_cities_api_v1_locations_cities_get",
        "responses": {
          "200": {
            "description": "List of all Taiwan cities retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CityListResponseWrapper"
                },
                "example": {
                  "cities": [
                    {
                      "code": "TPE",
                      "name": "Taipei City",
                      "name_zh": "台北市"
                    },
                    {
                      "code": "NTP",
                      "name": "New Taipei City",
                      "name_zh": "新北市"
                    },
                    {
                      "code": "TAO",
                      "name": "Taoyuan City",
                      "name_zh": "桃園市"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/gallery/cards": {
      "get": {
        "tags": [
          "Gallery"
        ],
        "summary": "Get user's gallery cards",
        "description": "View another user's public gallery cards (requires authentication).",
        "operationId": "get_user_gallery_cards_api_v1_users__user_id__gallery_cards_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards/me": {
      "get": {
        "tags": [
          "Gallery"
        ],
        "summary": "Get my gallery cards",
        "description": "Get the authenticated user's own gallery cards.",
        "operationId": "get_my_gallery_cards_api_v1_gallery_cards_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/gallery/cards": {
      "post": {
        "tags": [
          "Gallery"
        ],
        "summary": "Create gallery card",
        "description": "Create a new gallery card in the user's personal album.",
        "operationId": "create_gallery_card_api_v1_gallery_cards_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGalleryCardRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/gallery/cards/{card_id}": {
      "delete": {
        "tags": [
          "Gallery"
        ],
        "summary": "Delete gallery card",
        "description": "Delete a gallery card (only owner can delete).",
        "operationId": "delete_gallery_card_api_v1_gallery_cards__card_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "card_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Card Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards/reorder": {
      "put": {
        "tags": [
          "Gallery"
        ],
        "summary": "Reorder gallery cards",
        "description": "Update the display order of gallery cards.",
        "operationId": "reorder_gallery_cards_api_v1_gallery_cards_reorder_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReorderGalleryCardsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReorderGalleryCardsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/media/upload-url": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Generate presigned upload URL",
        "description": "Step 1: Generate a presigned URL for uploading media to GCS. FR-006.",
        "operationId": "create_upload_url_api_v1_media_upload_url_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUploadUrlRequestSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateUploadUrlResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/media/{media_id}/confirm": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Confirm media upload",
        "description": "Step 2: Confirm that media was uploaded to GCS. Applies quota. FR-022, T052.",
        "operationId": "confirm_upload_api_v1_media__media_id__confirm_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "media_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Media Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConfirmUploadResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/posts/{post_id}/attach": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Attach media to post",
        "description": "Step 3: Attach confirmed media to a post. FR-007.",
        "operationId": "attach_media_to_post_api_v1_media_posts__post_id__attach_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AttachMediaToPostRequestSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachMediaResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/gallery/cards/{card_id}/attach": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Attach media to gallery card",
        "description": "Step 3: Attach confirmed media to a gallery card. FR-007, FR-020.",
        "operationId": "attach_media_to_gallery_card_api_v1_media_gallery_cards__card_id__attach_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "card_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Card Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AttachMediaToGalleryCardRequestSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachMediaResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Create Message Request",
        "description": "Create a message request to another user.\n\nImplements FR-011: Message Requests for strangers.\nImplements FR-013: Privacy setting to block stranger messages.\nImplements FR-014: One unique thread per user pair.",
        "operationId": "create_message_request_api_v1_message_requests_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageRequestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/message-requests/inbox": {
      "get": {
        "tags": [
          "message-requests"
        ],
        "summary": "Get My Message Requests",
        "description": "Get message requests for the current user.\n\nSupports FR-016: Inbox clearly separates Requests vs Threads.\n\nQuery params:\n- status_filter: \"pending\", \"accepted\", \"declined\", or \"all\" (default: \"pending\")",
        "operationId": "get_my_message_requests_api_v1_message_requests_inbox_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "pending",
              "title": "Status Filter"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MessageRequestResponse"
                  },
                  "title": "Response Get My Message Requests Api V1 Message Requests Inbox Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/{request_id}/accept": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Accept Message Request",
        "description": "Accept a message request and create a thread.\n\nImplements FR-012: Recipient can accept/decline requests.\nCreates unique thread (FR-014).",
        "operationId": "accept_message_request_api_v1_message_requests__request_id__accept_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Request Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/{request_id}/decline": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Decline Message Request",
        "description": "Decline a message request.\n\nImplements FR-012: Recipient can accept/decline requests.",
        "operationId": "decline_message_request_api_v1_message_requests__request_id__decline_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Request Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/threads": {
      "get": {
        "tags": [
          "threads"
        ],
        "summary": "Get My Threads",
        "description": "Get all threads for the current user.\n\nSupports FR-016: Inbox clearly separates Requests vs Threads.\nReturns threads ordered by last_message_at descending.",
        "operationId": "get_my_threads_api_v1_threads_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/threads/{thread_id}/messages": {
      "get": {
        "tags": [
          "threads"
        ],
        "summary": "Get Thread Messages",
        "description": "Get messages in a thread.\n\nReturns messages ordered by created_at ascending (oldest first).\nUser must be part of the thread to view messages.",
        "operationId": "get_thread_messages_api_v1_threads__thread_id__messages_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadMessagesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "threads"
        ],
        "summary": "Send Message",
        "description": "Send a message in a thread.\n\nSupports FR-015: Messages can reference post_id.\nUser must be part of the thread to send messages.",
        "operationId": "send_message_api_v1_threads__thread_id__messages_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadMessageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AcceptInterestResponse": {
        "properties": {
          "interest_id": {
            "type": "string",
            "format": "uuid",
            "title": "Interest Id",
            "description": "Interest ID"
          },
          "friendship_created": {
            "type": "boolean",
            "title": "Friendship Created",
            "description": "Whether a new friendship was created"
          },
          "chat_room_id": {
            "type": "string",
            "format": "uuid",
            "title": "Chat Room Id",
            "description": "Chat room ID for conversation"
          }
        },
        "type": "object",
        "required": [
          "interest_id",
          "friendship_created",
          "chat_room_id"
        ],
        "title": "AcceptInterestResponse",
        "description": "Response schema for accepting an interest",
        "example": {
          "chat_room_id": "987e6543-e21b-12d3-a456-426614174000",
          "friendship_created": true,
          "interest_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "AcceptInterestResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/AcceptInterestResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "AcceptInterestResponseWrapper",
        "description": "Response wrapper for accept interest response (standardized envelope)"
      },
      "AcceptRequestResponse": {
        "properties": {
          "message_request": {
            "$ref": "#/components/schemas/MessageRequestResponse"
          },
          "thread": {
            "$ref": "#/components/schemas/ThreadResponse"
          }
        },
        "type": "object",
        "required": [
          "message_request",
          "thread"
        ],
        "title": "AcceptRequestResponse",
        "description": "Response for accepting a request"
      },
      "AdminLoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Admin email address"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "Admin password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "AdminLoginRequest",
        "description": "Request schema for admin login with email/password"
      },
      "AttachMediaResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Media status after attachment",
            "example": "attached"
          },
          "attached_to": {
            "type": "string",
            "title": "Attached To",
            "description": "Type of entity attached to",
            "example": "post"
          },
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id",
            "description": "ID of the entity media was attached to"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "status",
          "attached_to",
          "target_id"
        ],
        "title": "AttachMediaResponseSchema",
        "description": "Response schema after attaching media."
      },
      "AttachMediaToGalleryCardRequestSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "ID of confirmed media to attach"
          }
        },
        "type": "object",
        "required": [
          "media_id"
        ],
        "title": "AttachMediaToGalleryCardRequestSchema",
        "description": "Request schema for attaching media to gallery card."
      },
      "AttachMediaToPostRequestSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "ID of confirmed media to attach"
          }
        },
        "type": "object",
        "required": [
          "media_id"
        ],
        "title": "AttachMediaToPostRequestSchema",
        "description": "Request schema for attaching media to post."
      },
      "BlockUserRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ID of user to block",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "BlockUserRequest",
        "description": "Request schema for blocking a user",
        "example": {
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "CityCode": {
        "type": "string",
        "enum": [
          "TPE",
          "NTP",
          "TAO",
          "TXG",
          "TNN",
          "KHH",
          "KEE",
          "HSZ",
          "CYI",
          "HSQ",
          "MIA",
          "CHA",
          "NAN",
          "YUN",
          "CYQ",
          "PIF",
          "ILA",
          "HUA",
          "TTT",
          "PEN",
          "KIN",
          "LIE"
        ],
        "title": "CityCode",
        "description": "Valid Taiwan city codes for post filtering"
      },
      "CityListResponse": {
        "properties": {
          "cities": {
            "items": {
              "$ref": "#/components/schemas/CityResponse"
            },
            "type": "array",
            "title": "Cities",
            "description": "List of all available Taiwan cities/counties"
          }
        },
        "type": "object",
        "required": [
          "cities"
        ],
        "title": "CityListResponse",
        "description": "Response schema for list of all cities."
      },
      "CityListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/CityListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "CityListResponseWrapper",
        "description": "Response wrapper for city list (standardized envelope)"
      },
      "CityResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "City code (e.g., TPE, NTP, TAO)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "English name (e.g., Taipei City)"
          },
          "name_zh": {
            "type": "string",
            "title": "Name Zh",
            "description": "Chinese name (e.g., 台北市)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "name",
          "name_zh"
        ],
        "title": "CityResponse",
        "description": "Response schema for a single city."
      },
      "ConfirmUploadResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Media status after confirmation",
            "example": "confirmed"
          },
          "file_size_bytes": {
            "type": "integer",
            "title": "File Size Bytes"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "status",
          "file_size_bytes"
        ],
        "title": "ConfirmUploadResponseSchema",
        "description": "Response schema after confirming upload."
      },
      "CreateGalleryCardRequest": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Title"
          },
          "idol_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Idol Name"
          },
          "era": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Era"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "title",
          "idol_name"
        ],
        "title": "CreateGalleryCardRequest",
        "description": "Request to create a gallery card."
      },
      "CreateMessageRequestRequest": {
        "properties": {
          "recipient_id": {
            "type": "string",
            "title": "Recipient Id",
            "description": "ID of the recipient user"
          },
          "initial_message": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Initial Message",
            "description": "Initial message content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id",
            "description": "Optional post ID being referenced"
          }
        },
        "type": "object",
        "required": [
          "recipient_id",
          "initial_message"
        ],
        "title": "CreateMessageRequestRequest",
        "description": "Request to create a message request"
      },
      "CreatePostRequest": {
        "properties": {
          "scope": {
            "$ref": "#/components/schemas/PostScope",
            "description": "Post scope: global (visible everywhere) or city (city-specific)",
            "examples": [
              "global",
              "city"
            ]
          },
          "city_code": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CityCode"
              },
              {
                "type": "null"
              }
            ],
            "description": "City code - required when scope=city, must be empty when scope=global",
            "examples": [
              "TPE"
            ]
          },
          "category": {
            "$ref": "#/components/schemas/PostCategory",
            "description": "Post category",
            "examples": [
              "trade",
              "giveaway",
              "group",
              "showcase",
              "help",
              "announcement"
            ]
          },
          "title": {
            "type": "string",
            "maxLength": 120,
            "title": "Title",
            "description": "Post title",
            "examples": [
              "Looking for BTS cards in Taipei"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Post content",
            "examples": [
              "I have Jungkook cards and looking for V cards"
            ]
          },
          "idol": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name for filtering",
            "examples": [
              "Jungkook"
            ]
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group for filtering",
            "examples": [
              "BTS"
            ]
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At",
            "description": "Expiry datetime (defaults to 14 days from now)"
          }
        },
        "type": "object",
        "required": [
          "scope",
          "category",
          "title",
          "content"
        ],
        "title": "CreatePostRequest",
        "description": "Request schema for creating a post (V2: with scope/category)",
        "example": {
          "category": "trade",
          "city_code": "TPE",
          "content": "I have Jungkook cards and looking for V cards",
          "idol": "Jungkook",
          "idol_group": "BTS",
          "scope": "city",
          "title": "Looking for BTS cards in Taipei"
        }
      },
      "CreateUploadUrlRequestSchema": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type of the file (e.g., image/jpeg)",
            "example": "image/jpeg"
          },
          "file_size_bytes": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "File Size Bytes",
            "description": "File size in bytes",
            "example": 1048576
          },
          "filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filename",
            "description": "Original filename",
            "example": "card.jpg"
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "file_size_bytes"
        ],
        "title": "CreateUploadUrlRequestSchema",
        "description": "Request schema for creating upload URL."
      },
      "CreateUploadUrlResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "Media asset ID for confirmation"
          },
          "upload_url": {
            "type": "string",
            "title": "Upload Url",
            "description": "Presigned URL for uploading file"
          },
          "expires_in_minutes": {
            "type": "integer",
            "title": "Expires In Minutes",
            "description": "URL expiration time in minutes"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "upload_url",
          "expires_in_minutes"
        ],
        "title": "CreateUploadUrlResponseSchema",
        "description": "Response schema for upload URL."
      },
      "GalleryCardListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GalleryCardResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "GalleryCardListResponse",
        "description": "Response for a list of gallery cards."
      },
      "GalleryCardResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "idol_name": {
            "type": "string",
            "title": "Idol Name"
          },
          "era": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Era"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "media_asset_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Media Asset Id"
          },
          "display_order": {
            "type": "integer",
            "title": "Display Order"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "title",
          "idol_name",
          "display_order",
          "created_at",
          "updated_at"
        ],
        "title": "GalleryCardResponse",
        "description": "Response for a single gallery card."
      },
      "GoogleCallbackRequest": {
        "properties": {
          "code": {
            "type": "string",
            "minLength": 1,
            "title": "Code",
            "description": "Authorization code from Google OAuth"
          },
          "code_verifier": {
            "type": "string",
            "maxLength": 128,
            "minLength": 43,
            "title": "Code Verifier",
            "description": "PKCE code verifier used during authorization request"
          },
          "redirect_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Redirect Uri",
            "description": "Redirect URI used during authorization (must match the one used in auth request)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "code_verifier"
        ],
        "title": "GoogleCallbackRequest",
        "description": "Request schema for Google OAuth callback with PKCE (Expo AuthSession)"
      },
      "GoogleLoginRequest": {
        "properties": {
          "google_token": {
            "type": "string",
            "minLength": 1,
            "title": "Google Token",
            "description": "Google ID token received from Google OAuth"
          }
        },
        "type": "object",
        "required": [
          "google_token"
        ],
        "title": "GoogleLoginRequest",
        "description": "Request schema for Google login"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LoginResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/TokenResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "LoginResponse",
        "description": "Response wrapper for successful login (standardized envelope)"
      },
      "MessageRequestResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "sender_id": {
            "type": "string",
            "title": "Sender Id"
          },
          "recipient_id": {
            "type": "string",
            "title": "Recipient Id"
          },
          "initial_message": {
            "type": "string",
            "title": "Initial Message"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "sender_id",
          "recipient_id",
          "initial_message",
          "post_id",
          "status",
          "thread_id",
          "created_at",
          "updated_at"
        ],
        "title": "MessageRequestResponse",
        "description": "Response for a message request"
      },
      "PostCategory": {
        "type": "string",
        "enum": [
          "trade",
          "giveaway",
          "group",
          "showcase",
          "help",
          "announcement"
        ],
        "title": "PostCategory",
        "description": "Post category enumeration (FR-002)"
      },
      "PostInterestListResponse": {
        "properties": {
          "interests": {
            "items": {
              "$ref": "#/components/schemas/PostInterestResponse"
            },
            "type": "array",
            "title": "Interests",
            "description": "List of interests"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of interests"
          }
        },
        "type": "object",
        "required": [
          "interests",
          "total"
        ],
        "title": "PostInterestListResponse",
        "description": "Response schema for post interest list",
        "example": {
          "interests": [
            {
              "created_at": "2024-01-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "post_id": "987e6543-e21b-12d3-a456-426614174000",
              "status": "pending",
              "updated_at": "2024-01-01T00:00:00Z",
              "user_id": "456e7890-e12b-34d5-a678-901234567000"
            }
          ],
          "total": 1
        }
      },
      "PostInterestListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostInterestListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostInterestListResponseWrapper",
        "description": "Response wrapper for post interest list (standardized envelope)"
      },
      "PostInterestResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Interest ID"
          },
          "post_id": {
            "type": "string",
            "format": "uuid",
            "title": "Post Id",
            "description": "Post ID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID who expressed interest"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Interest status",
            "examples": [
              "pending",
              "accepted",
              "rejected"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "post_id",
          "user_id",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "PostInterestResponse",
        "description": "Response schema for post interest details",
        "example": {
          "created_at": "2024-01-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "post_id": "987e6543-e21b-12d3-a456-426614174000",
          "status": "pending",
          "updated_at": "2024-01-01T00:00:00Z",
          "user_id": "456e7890-e12b-34d5-a678-901234567000"
        }
      },
      "PostInterestResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostInterestResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostInterestResponseWrapper",
        "description": "Response wrapper for single post interest (standardized envelope)"
      },
      "PostListResponse": {
        "properties": {
          "posts": {
            "items": {
              "$ref": "#/components/schemas/PostResponse"
            },
            "type": "array",
            "title": "Posts",
            "description": "List of posts"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of posts"
          }
        },
        "type": "object",
        "required": [
          "posts",
          "total"
        ],
        "title": "PostListResponse",
        "description": "Response schema for post list",
        "example": {
          "posts": [
            {
              "category": "trade",
              "city_code": "TPE",
              "content": "I have Jungkook cards",
              "created_at": "2024-01-01T00:00:00Z",
              "expires_at": "2024-02-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "idol": "Jungkook",
              "idol_group": "BTS",
              "owner_id": "987e6543-e21b-12d3-a456-426614174000",
              "scope": "city",
              "status": "open",
              "title": "Looking for BTS cards",
              "updated_at": "2024-01-01T00:00:00Z"
            }
          ],
          "total": 1
        }
      },
      "PostListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostListResponseWrapper",
        "description": "Response wrapper for post list (standardized envelope)"
      },
      "PostResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Post ID"
          },
          "owner_id": {
            "type": "string",
            "format": "uuid",
            "title": "Owner Id",
            "description": "Owner user ID"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "description": "Post scope (global/city)"
          },
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code",
            "description": "City code (if scope=city)"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Post category"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Post title"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Post content"
          },
          "idol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name"
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Post status",
            "examples": [
              "open",
              "closed",
              "expired",
              "deleted"
            ]
          },
          "like_count": {
            "type": "integer",
            "title": "Like Count",
            "description": "Total number of likes on this post",
            "default": 0
          },
          "liked_by_me": {
            "type": "boolean",
            "title": "Liked By Me",
            "description": "Whether the current user has liked this post",
            "default": false
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "Expiry datetime"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "owner_id",
          "scope",
          "category",
          "title",
          "content",
          "status",
          "expires_at",
          "created_at",
          "updated_at"
        ],
        "title": "PostResponse",
        "description": "Response schema for post details (V2: with scope/category + like fields)",
        "example": {
          "category": "trade",
          "city_code": "TPE",
          "content": "I have Jungkook cards and looking for V cards",
          "created_at": "2024-01-01T00:00:00Z",
          "expires_at": "2024-02-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "idol": "Jungkook",
          "idol_group": "BTS",
          "like_count": 5,
          "liked_by_me": true,
          "owner_id": "987e6543-e21b-12d3-a456-426614174000",
          "scope": "city",
          "status": "open",
          "title": "Looking for BTS cards in Taipei",
          "updated_at": "2024-01-01T00:00:00Z"
        }
      },
      "PostResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostResponseWrapper",
        "description": "Response wrapper for single post (standardized envelope)"
      },
      "PostScope": {
        "type": "string",
        "enum": [
          "global",
          "city"
        ],
        "title": "PostScope",
        "description": "Post scope enumeration (FR-003)"
      },
      "ProfileResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Profile ID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Profile creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Profile last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "created_at",
          "updated_at"
        ],
        "title": "ProfileResponse",
        "description": "Response schema for user profile",
        "example": {
          "avatar_url": "https://example.com/avatar.jpg",
          "bio": "Love collecting K-pop cards!",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "987e6543-e21b-12d3-a456-426614174000",
          "nickname": "CardCollector",
          "preferences": {
            "language": "ko",
            "theme": "dark"
          },
          "privacy_flags": {
            "allow_stranger_chat": false,
            "show_online": true
          },
          "region": "Seoul",
          "updated_at": "2024-01-15T12:30:00Z",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "ProfileResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProfileResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ProfileResponseWrapper",
        "description": "Response wrapper for profile data (standardized envelope)"
      },
      "RefreshSuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates successful refresh",
            "default": true
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message",
            "default": "Tokens refreshed successfully"
          }
        },
        "type": "object",
        "title": "RefreshSuccessResponse",
        "description": "Response for successful token refresh (cookie-based)"
      },
      "ReorderGalleryCardsRequest": {
        "properties": {
          "card_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "minItems": 1,
            "title": "Card Ids"
          }
        },
        "type": "object",
        "required": [
          "card_ids"
        ],
        "title": "ReorderGalleryCardsRequest",
        "description": "Request to reorder gallery cards."
      },
      "ReorderGalleryCardsResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "default": "Gallery cards reordered successfully"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count"
          }
        },
        "type": "object",
        "required": [
          "updated_count"
        ],
        "title": "ReorderGalleryCardsResponse",
        "description": "Response after reordering gallery cards."
      },
      "ReportListResponse": {
        "properties": {
          "reports": {
            "items": {
              "$ref": "#/components/schemas/ReportResponse"
            },
            "type": "array",
            "title": "Reports",
            "description": "List of reports"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of reports"
          }
        },
        "type": "object",
        "required": [
          "reports",
          "total"
        ],
        "title": "ReportListResponse",
        "description": "Response schema for list of reports"
      },
      "ReportListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ReportListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ReportListResponseWrapper",
        "description": "Response wrapper for report list (standardized envelope)"
      },
      "ReportReason": {
        "type": "string",
        "enum": [
          "fraud",
          "fake_card",
          "harassment",
          "inappropriate_content",
          "spam",
          "other"
        ],
        "title": "ReportReason",
        "description": "Report reason enumeration"
      },
      "ReportRequest": {
        "properties": {
          "reported_user_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reported User Id",
            "description": "ID of user being reported",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          },
          "reason": {
            "$ref": "#/components/schemas/ReportReason",
            "description": "Reason for report (must be one of: fraud, fake_card, harassment, inappropriate_content, spam, other)",
            "examples": [
              "harassment"
            ]
          },
          "detail": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail",
            "description": "Detailed description of the issue",
            "examples": [
              "User sent inappropriate messages and refused to complete trade."
            ]
          }
        },
        "type": "object",
        "required": [
          "reported_user_id",
          "reason"
        ],
        "title": "ReportRequest",
        "description": "Request schema for submitting a report"
      },
      "ReportResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Report ID"
          },
          "reporter_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reporter Id",
            "description": "User who filed the report"
          },
          "reported_user_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reported User Id",
            "description": "User who was reported"
          },
          "reason": {
            "$ref": "#/components/schemas/ReportReason",
            "description": "Reason for report"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail",
            "description": "Detailed description"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Report status",
            "examples": [
              "pending",
              "reviewed",
              "resolved"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "reporter_id",
          "reported_user_id",
          "reason",
          "status",
          "created_at"
        ],
        "title": "ReportResponse",
        "description": "Response schema for a report"
      },
      "ReportResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ReportResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ReportResponseWrapper",
        "description": "Response wrapper for single report (standardized envelope)"
      },
      "SendMessageRequest": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Content",
            "description": "Message content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id",
            "description": "Optional post ID to reference"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "SendMessageRequest",
        "description": "Request to send a message in a thread"
      },
      "ThreadListResponse": {
        "properties": {
          "threads": {
            "items": {
              "$ref": "#/components/schemas/ThreadResponse"
            },
            "type": "array",
            "title": "Threads"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "threads",
          "total"
        ],
        "title": "ThreadListResponse",
        "description": "Response for list of threads"
      },
      "ThreadMessageResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "thread_id": {
            "type": "string",
            "title": "Thread Id"
          },
          "sender_id": {
            "type": "string",
            "title": "Sender Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "thread_id",
          "sender_id",
          "content",
          "post_id",
          "created_at"
        ],
        "title": "ThreadMessageResponse",
        "description": "Response for a thread message"
      },
      "ThreadMessagesResponse": {
        "properties": {
          "messages": {
            "items": {
              "$ref": "#/components/schemas/ThreadMessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "messages",
          "total"
        ],
        "title": "ThreadMessagesResponse",
        "description": "Response for list of messages in a thread"
      },
      "ThreadResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_a_id": {
            "type": "string",
            "title": "User A Id"
          },
          "user_b_id": {
            "type": "string",
            "title": "User B Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "last_message_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Message At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_a_id",
          "user_b_id",
          "created_at",
          "updated_at",
          "last_message_at"
        ],
        "title": "ThreadResponse",
        "description": "Response for a message thread"
      },
      "ToggleLikeResponse": {
        "properties": {
          "liked": {
            "type": "boolean",
            "title": "Liked",
            "description": "Whether the post is now liked by the user"
          },
          "like_count": {
            "type": "integer",
            "title": "Like Count",
            "description": "Current total like count for the post"
          }
        },
        "type": "object",
        "required": [
          "liked",
          "like_count"
        ],
        "title": "ToggleLikeResponse",
        "description": "Response schema for toggle like action",
        "example": {
          "like_count": 6,
          "liked": true
        }
      },
      "ToggleLikeResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ToggleLikeResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ToggleLikeResponseWrapper",
        "description": "Response wrapper for toggle like response (standardized envelope)"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration in seconds"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email"
          },
          "role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role",
            "description": "User role (only for admin users)"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in",
          "user_id",
          "email"
        ],
        "title": "TokenResponse",
        "description": "Response schema for authentication tokens",
        "example": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "email": "user@example.com",
          "expires_in": 900,
          "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "role": "admin",
          "token_type": "bearer",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "UnblockUserRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ID of user to unblock",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "UnblockUserRequest",
        "description": "Request schema for unblocking a user",
        "example": {
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "UpdateProfileRequest": {
        "properties": {
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          }
        },
        "type": "object",
        "title": "UpdateProfileRequest",
        "description": "Request schema for updating user profile",
        "example": {
          "bio": "Updated bio",
          "nickname": "NewNickname",
          "privacy_flags": {
            "allow_stranger_chat": true,
            "show_online": false
          }
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}