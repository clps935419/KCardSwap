{
  "openapi": "3.1.0",
  "info": {
    "title": "KCardSwap API",
    "description": "Backend API for KCardSwap - Card Exchange Platform",
    "version": "0.1.0"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint for container orchestration.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "Api Health Check",
        "description": "API health check endpoint.",
        "operationId": "api_health_check_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/admin-login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Admin login with email/password",
        "description": "Authenticate admin user with email and password and receive JWT tokens via httpOnly cookies",
        "operationId": "admin_login_api_v1_auth_admin_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated as admin",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid credentials or not an admin"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login with Google",
        "description": "Authenticate user with Google OAuth token and receive JWT tokens via httpOnly cookies",
        "operationId": "google_login_api_v1_auth_google_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid Google token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google-callback": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Google OAuth Callback with PKCE",
        "description": "Authenticate user with Google OAuth authorization code and PKCE code_verifier (Expo AuthSession)",
        "operationId": "google_callback_api_v1_auth_google_callback_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleCallbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid authorization code or code_verifier"
          },
          "422": {
            "description": "Token exchange failed"
          }
        }
      }
    },
    "/api/v1/auth/google-login-code": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login with Google authorization code",
        "description": "Authenticate user with Google OAuth authorization code (Web flow without PKCE)",
        "operationId": "google_login_code_api_v1_auth_google_login_code_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleCodeLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Invalid authorization code"
          },
          "422": {
            "description": "Token exchange failed"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token (cookie-based)",
        "description": "Use refresh token from httpOnly cookie to obtain new access and refresh tokens",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "parameters": [
          {
            "name": "refresh_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Refresh Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully refreshed tokens",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshSuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout and clear authentication cookies",
        "description": "Clear access and refresh token cookies to log out the user",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successfully logged out",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/profile/me": {
      "get": {
        "tags": [
          "Profile"
        ],
        "summary": "Get my profile",
        "description": "Retrieve the authenticated user's profile information",
        "operationId": "get_my_profile_api_v1_profile_me_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Profile not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Profile"
        ],
        "summary": "Update my profile",
        "description": "Update the authenticated user's profile information",
        "operationId": "update_my_profile_api_v1_profile_me_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully updated profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/idols/groups": {
      "get": {
        "tags": [
          "idols"
        ],
        "summary": "Get all idol groups",
        "description": "Get a list of all available K-pop idol groups for onboarding.\n\n    This endpoint provides the complete list of idol groups that users can select\n    during the onboarding process to indicate their preferences.\n\n    Each idol group includes:\n    - `id`: Unique identifier (e.g., newjeans, ive, aespa)\n    - `name`: Display name (e.g., NewJeans, IVE, aespa)\n    - `emoji`: Emoji representing the group (e.g., ðŸ‘–, ðŸ¦¢, ðŸ¦‹)\n\n    This is a **public endpoint** that **does not require authentication**.\n    Frontend applications should use this to dynamically populate idol group selection.",
        "operationId": "get_idol_groups_api_v1_idols_groups_get",
        "responses": {
          "200": {
            "description": "List of all idol groups retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdolGroupListResponseWrapper"
                },
                "example": {
                  "data": {
                    "groups": [
                      {
                        "id": "newjeans",
                        "name": "NewJeans",
                        "emoji": "ðŸ‘–"
                      },
                      {
                        "id": "ive",
                        "name": "IVE",
                        "emoji": "ðŸ¦¢"
                      },
                      {
                        "id": "aespa",
                        "name": "aespa",
                        "emoji": "ðŸ¦‹"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/verify-receipt": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Verify Receipt",
        "description": "Verify Google Play purchase receipt and update subscription.\n\nFeatures:\n- Idempotent: Same token + same user returns current status\n- Token binding: Prevents cross-user replay attacks\n- Auto-acknowledge: Acknowledges purchase after verification\n\nError codes:\n- 400_VALIDATION_FAILED: Invalid platform or missing fields\n- 401_UNAUTHORIZED: Not logged in\n- 409_CONFLICT: Purchase token already used by another user\n- 503_SERVICE_UNAVAILABLE: Google Play API unavailable",
        "operationId": "verify_receipt_api_v1_subscriptions_verify_receipt_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyReceiptRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/status": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get Subscription Status",
        "description": "Get current subscription status for authenticated user.\n\nReturns server-side subscription state.\nCalled by app when opening or returning to foreground.\n\nError codes:\n- 401_UNAUTHORIZED: Not logged in\n- 503_SERVICE_UNAVAILABLE: Database unavailable",
        "operationId": "get_subscription_status_api_v1_subscriptions_status_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/expire-subscriptions": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Expire Subscriptions",
        "description": "Expire active subscriptions that have passed their expiry date.\n\nThis endpoint should be called by a scheduled background task (e.g., daily cron job).\nFor POC, it's exposed as an HTTP endpoint for manual triggering.\n\nIn production, this should be:\n- Protected by admin authentication or internal-only access\n- Triggered by a scheduler (APScheduler, Celery Beat, Cloud Scheduler, etc.)\n\nReturns:\n    Number of subscriptions expired and processing timestamp",
        "operationId": "expire_subscriptions_api_v1_subscriptions_expire_subscriptions_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExpireSubscriptionsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/friends/block": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Block a user",
        "description": "Block a user to prevent interaction. Required for FR-025 (blocking support).",
        "operationId": "block_user_api_v1_friends_block_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlockUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Block User Api V1 Friends Block Post"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/friends/unblock": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Unblock a user",
        "description": "Unblock a previously blocked user. Required for FR-025.",
        "operationId": "unblock_user_api_v1_friends_unblock_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnblockUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Unblock User Api V1 Friends Unblock Post"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports": {
      "post": {
        "tags": [
          "Reports"
        ],
        "summary": "Submit report",
        "description": "Submit a report for inappropriate behavior or content",
        "operationId": "submit_report_api_v1_reports_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReportRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Report submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (validation failed)"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "422": {
            "description": "Unprocessable entity (cannot report user)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "get": {
        "tags": [
          "Reports"
        ],
        "summary": "Get my reports",
        "description": "Get reports submitted by the current user",
        "operationId": "get_my_reports_api_v1_reports_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reports retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chats": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Get chat rooms",
        "description": "Get all chat rooms for the current user",
        "operationId": "get_chat_rooms_api_v1_chats_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Chat rooms retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatRoomListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chats/{room_id}/messages": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Get messages",
        "description": "Get messages from a chat room (with pagination support via after_message_id)",
        "operationId": "get_messages_api_v1_chats__room_id__messages_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Room Id"
            }
          },
          {
            "name": "after_message_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Get messages after this message ID",
              "title": "After Message Id"
            },
            "description": "Get messages after this message ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of messages",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of messages"
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessagesListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not a participant of this room)"
          },
          "404": {
            "description": "Chat room not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Send message",
        "description": "Send a message in a chat room (triggers FCM push notification)",
        "operationId": "send_message_api_v1_chats__room_id__messages_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Room Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__modules__social__presentation__schemas__chat_schemas__SendMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (validation failed)"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not authorized to send message)"
          },
          "404": {
            "description": "Chat room not found"
          },
          "422": {
            "description": "Unprocessable entity (blocked or not friends)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/chats/{room_id}/messages/{message_id}/read": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Mark message as read",
        "description": "Mark a message as read by the current user",
        "operationId": "mark_message_read_api_v1_chats__room_id__messages__message_id__read_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Room Id"
            }
          },
          {
            "name": "message_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Message Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Message marked as read"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not authorized)"
          },
          "404": {
            "description": "Message not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/categories": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Get available post categories",
        "description": "Returns list of all available post categories with their labels",
        "operationId": "get_categories_api_v1_posts_categories_get",
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostCategoryListResponseWrapper"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Create a new post (V2: with scope/category)",
        "description": "Create a new post. Requires authentication. Free users limited to 2 posts per day, Premium to 20.",
        "operationId": "create_post_api_v1_posts_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePostRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Post created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (validation failed)"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "422": {
            "description": "Unprocessable entity (daily limit exceeded or validation failed)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "List posts (V2: global/city filtering with category)",
        "description": "List posts. FR-005: Global view (no city_code) shows all posts; City view (with city_code) shows city-specific posts.",
        "operationId": "list_posts_api_v1_posts_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "city_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional city filter (omit for global view)",
              "title": "City Code"
            },
            "description": "Optional city filter (omit for global view)"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/PostCategory"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional category filter",
              "title": "Category"
            },
            "description": "Optional category filter"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Posts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostListResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Get a single post by ID",
        "description": "Retrieve a post by its ID. Phase 9: Includes media_asset_ids for image display.",
        "operationId": "get_post_api_v1_posts__post_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Post retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "404": {
            "description": "Post not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/close": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Close a post",
        "description": "Manually close a post. Only post owner can close.",
        "operationId": "close_post_api_v1_posts__post_id__close_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Post closed successfully"
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "403": {
            "description": "Forbidden (not post owner)"
          },
          "404": {
            "description": "Post not found"
          },
          "422": {
            "description": "Unprocessable entity (post not open)"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/like": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Toggle like on a post (FR-008, FR-009)",
        "description": "Like or unlike a post. Idempotent: if already liked, unlikes; if not liked, likes. Each user can like a post at most once.",
        "operationId": "toggle_like_api_v1_posts__post_id__like_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Like toggled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToggleLikeResponseWrapper"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (not logged in)"
          },
          "404": {
            "description": "Post not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/comments": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "List comments on a post",
        "description": "Returns list of comments for a post (latest first)",
        "operationId": "list_post_comments_api_v1_posts__post_id__comments_get",
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of comments to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of comments to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of comments to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of comments to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Comments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommentListResponseWrapper"
                }
              }
            }
          },
          "404": {
            "description": "Post not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Create a comment on a post",
        "description": "Create a new comment on the specified post (requires authentication)",
        "operationId": "create_post_comment_api_v1_posts__post_id__comments_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCommentRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Comment created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommentResponseWrapper"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "404": {
            "description": "Post not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/cities": {
      "get": {
        "tags": [
          "locations"
        ],
        "summary": "Get all Taiwan cities",
        "description": "Get a list of all available Taiwan cities/counties.\n\n    This endpoint provides the complete list of Taiwan's 22 cities/counties including:\n    - **Six Special Municipalities** (ç›´è½„å¸‚): Taipei, New Taipei, Taoyuan, Taichung, Tainan, Kaohsiung\n    - **Provincial Cities** (çœè½„å¸‚): Hsinchu City, Chiayi City\n    - **Counties** (ç¸£): Hsinchu County, Miaoli, Changhua, Nantou, Yunlin, Chiayi County, Pingtung, Yilan, Hualien, Taitung, Penghu, Kinmen, Lienchiang\n\n    Each city includes:\n    - `code`: City code used in APIs (e.g., TPE, NTP, TAO)\n    - `name`: English name (e.g., Taipei City)\n    - `name_zh`: Chinese name (e.g., å°åŒ—å¸‚)\n\n    This is a public endpoint that **does not require authentication**.\n    Frontend applications should use this to dynamically populate city selection dropdowns.",
        "operationId": "get_cities_api_v1_locations_cities_get",
        "responses": {
          "200": {
            "description": "List of all Taiwan cities retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CityListResponseWrapper"
                },
                "example": {
                  "cities": [
                    {
                      "code": "TPE",
                      "name": "Taipei City",
                      "name_zh": "å°åŒ—å¸‚"
                    },
                    {
                      "code": "NTP",
                      "name": "New Taipei City",
                      "name_zh": "æ–°åŒ—å¸‚"
                    },
                    {
                      "code": "TAO",
                      "name": "Taoyuan City",
                      "name_zh": "æ¡ƒåœ’å¸‚"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/gallery/cards": {
      "get": {
        "tags": [
          "Gallery"
        ],
        "summary": "Get user's gallery cards",
        "description": "View another user's public gallery cards (requires authentication).",
        "operationId": "get_user_gallery_cards_api_v1_users__user_id__gallery_cards_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards/me": {
      "get": {
        "tags": [
          "Gallery"
        ],
        "summary": "Get my gallery cards",
        "description": "Get the authenticated user's own gallery cards.",
        "operationId": "get_my_gallery_cards_api_v1_gallery_cards_me_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards": {
      "post": {
        "tags": [
          "Gallery"
        ],
        "summary": "Create gallery card",
        "description": "Create a new gallery card in the user's personal album.",
        "operationId": "create_gallery_card_api_v1_gallery_cards_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGalleryCardRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GalleryCardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards/{card_id}": {
      "delete": {
        "tags": [
          "Gallery"
        ],
        "summary": "Delete gallery card",
        "description": "Delete a gallery card (only owner can delete).",
        "operationId": "delete_gallery_card_api_v1_gallery_cards__card_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "card_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Card Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gallery/cards/reorder": {
      "put": {
        "tags": [
          "Gallery"
        ],
        "summary": "Reorder gallery cards",
        "description": "Update the display order of gallery cards.",
        "operationId": "reorder_gallery_cards_api_v1_gallery_cards_reorder_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReorderGalleryCardsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReorderGalleryCardsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/upload-url": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Generate presigned upload URL",
        "description": "Step 1: Generate a presigned URL for uploading media to GCS. FR-006.",
        "operationId": "create_upload_url_api_v1_media_upload_url_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUploadUrlRequestSchema"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateUploadUrlResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/{media_id}/confirm": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Confirm media upload",
        "description": "Step 2: Confirm that media was uploaded to GCS. Applies quota. FR-022, T052.",
        "operationId": "confirm_upload_api_v1_media__media_id__confirm_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "media_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Media Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConfirmUploadResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/posts/{post_id}/attach": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Attach media to post",
        "description": "Step 3: Attach confirmed media to a post. FR-007.",
        "operationId": "attach_media_to_post_api_v1_media_posts__post_id__attach_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Post Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AttachMediaToPostRequestSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachMediaResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/gallery/cards/{card_id}/attach": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Attach media to gallery card",
        "description": "Step 3: Attach confirmed media to a gallery card. FR-007, FR-020.",
        "operationId": "attach_media_to_gallery_card_api_v1_media_gallery_cards__card_id__attach_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "card_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Card Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AttachMediaToGalleryCardRequestSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachMediaResponseSchema"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/read-urls": {
      "post": {
        "tags": [
          "media"
        ],
        "summary": "Get signed read URLs for media assets (Phase 9)",
        "description": "Batch retrieve signed download URLs for media. Login required. T083-T085.",
        "operationId": "get_media_read_urls_api_v1_media_read_urls_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReadMediaUrlsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadMediaUrlsResponseWrapper"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Create Message Request",
        "description": "Create a message request to another user.\n\nImplements FR-011: Message Requests for strangers.\nImplements FR-013: Privacy setting to block stranger messages.\nImplements FR-014: One unique thread per user pair.",
        "operationId": "create_message_request_api_v1_message_requests_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageRequestRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/inbox": {
      "get": {
        "tags": [
          "message-requests"
        ],
        "summary": "Get My Message Requests",
        "description": "Get message requests for the current user.\n\nSupports FR-016: Inbox clearly separates Requests vs Threads.\n\nQuery params:\n- status_filter: \"pending\", \"accepted\", \"declined\", or \"all\" (default: \"pending\")",
        "operationId": "get_my_message_requests_api_v1_message_requests_inbox_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "pending",
              "title": "Status Filter"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MessageRequestResponse"
                  },
                  "title": "Response Get My Message Requests Api V1 Message Requests Inbox Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/sent": {
      "get": {
        "tags": [
          "message-requests"
        ],
        "summary": "Get My Sent Message Requests",
        "description": "Get message requests sent by the current user.\n\nSender typically only needs pending status.\n\nQuery params:\n- status_filter: \"pending\", \"accepted\", \"declined\", or \"all\" (default: \"pending\")",
        "operationId": "get_my_sent_message_requests_api_v1_message_requests_sent_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "pending",
              "title": "Status Filter"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MessageRequestResponse"
                  },
                  "title": "Response Get My Sent Message Requests Api V1 Message Requests Sent Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/{request_id}/accept": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Accept Message Request",
        "description": "Accept a message request and create a thread.\n\nImplements FR-012: Recipient can accept/decline requests.\nCreates unique thread (FR-014).",
        "operationId": "accept_message_request_api_v1_message_requests__request_id__accept_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Request Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message-requests/{request_id}/decline": {
      "post": {
        "tags": [
          "message-requests"
        ],
        "summary": "Decline Message Request",
        "description": "Decline a message request.\n\nImplements FR-012: Recipient can accept/decline requests.",
        "operationId": "decline_message_request_api_v1_message_requests__request_id__decline_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Request Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageRequestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/threads": {
      "get": {
        "tags": [
          "threads"
        ],
        "summary": "Get My Threads",
        "description": "Get all threads for the current user.\n\nSupports FR-016: Inbox clearly separates Requests vs Threads.\nReturns threads ordered by last_message_at descending.",
        "operationId": "get_my_threads_api_v1_threads_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/threads/{thread_id}/messages": {
      "get": {
        "tags": [
          "threads"
        ],
        "summary": "Get Thread Messages",
        "description": "Get messages in a thread.\n\nReturns messages ordered by created_at ascending (oldest first).\nUser must be part of the thread to view messages.",
        "operationId": "get_thread_messages_api_v1_threads__thread_id__messages_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadMessagesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "threads"
        ],
        "summary": "Send Message",
        "description": "Send a message in a thread.\n\nSupports FR-015: Messages can reference post_id.\nUser must be part of the thread to send messages.",
        "operationId": "send_message_api_v1_threads__thread_id__messages_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          },
          {
            "name": "access_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Access Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__modules__social__presentation__schemas__message_schemas__SendMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThreadMessageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AcceptRequestResponse": {
        "properties": {
          "message_request": {
            "$ref": "#/components/schemas/MessageRequestResponse"
          },
          "thread": {
            "$ref": "#/components/schemas/ThreadResponse"
          }
        },
        "type": "object",
        "required": [
          "message_request",
          "thread"
        ],
        "title": "AcceptRequestResponse",
        "description": "Response for accepting a request"
      },
      "AdminLoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Admin email address"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "Admin password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "AdminLoginRequest",
        "description": "Request schema for admin login with email/password"
      },
      "AttachMediaResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Media status after attachment",
            "example": "attached"
          },
          "attached_to": {
            "type": "string",
            "title": "Attached To",
            "description": "Type of entity attached to",
            "example": "post"
          },
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id",
            "description": "ID of the entity media was attached to"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "status",
          "attached_to",
          "target_id"
        ],
        "title": "AttachMediaResponseSchema",
        "description": "Response schema after attaching media."
      },
      "AttachMediaToGalleryCardRequestSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "ID of confirmed media to attach"
          }
        },
        "type": "object",
        "required": [
          "media_id"
        ],
        "title": "AttachMediaToGalleryCardRequestSchema",
        "description": "Request schema for attaching media to gallery card."
      },
      "AttachMediaToPostRequestSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "ID of confirmed media to attach"
          }
        },
        "type": "object",
        "required": [
          "media_id"
        ],
        "title": "AttachMediaToPostRequestSchema",
        "description": "Request schema for attaching media to post."
      },
      "BlockUserRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ID of user to block",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "BlockUserRequest",
        "description": "Request schema for blocking a user",
        "example": {
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "ChatRoomListResponse": {
        "properties": {
          "rooms": {
            "items": {
              "$ref": "#/components/schemas/ChatRoomResponse"
            },
            "type": "array",
            "title": "Rooms",
            "description": "List of chat rooms"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of chat rooms"
          }
        },
        "type": "object",
        "required": [
          "rooms",
          "total"
        ],
        "title": "ChatRoomListResponse",
        "description": "Response schema for list of chat rooms"
      },
      "ChatRoomListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ChatRoomListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ChatRoomListResponseWrapper",
        "description": "Response wrapper for chat room list (standardized envelope)"
      },
      "ChatRoomParticipantResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User's nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "User's avatar URL"
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "ChatRoomParticipantResponse",
        "description": "Response schema for chat room participant"
      },
      "ChatRoomResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Chat room ID"
          },
          "participants": {
            "items": {
              "$ref": "#/components/schemas/ChatRoomParticipantResponse"
            },
            "type": "array",
            "title": "Participants",
            "description": "Room participants"
          },
          "last_message": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MessageResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Last message in the room"
          },
          "unread_count": {
            "type": "integer",
            "title": "Unread Count",
            "description": "Number of unread messages for current user",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "participants",
          "created_at"
        ],
        "title": "ChatRoomResponse",
        "description": "Response schema for chat room details",
        "example": {
          "created_at": "2024-01-01T00:00:00Z",
          "id": "987e6543-e21b-12d3-a456-426614174000",
          "last_message": {
            "content": "Hello!",
            "created_at": "2024-01-01T00:00:00Z",
            "id": "123e4567-e89b-12d3-a456-426614174000",
            "room_id": "987e6543-e21b-12d3-a456-426614174000",
            "sender_id": "456e7890-e12b-34d5-a678-901234567000",
            "status": "read"
          },
          "participants": [
            {
              "avatar_url": "https://example.com/avatar.jpg",
              "nickname": "John Doe",
              "user_id": "456e7890-e12b-34d5-a678-901234567000"
            },
            {
              "avatar_url": "https://example.com/avatar2.jpg",
              "nickname": "Jane Smith",
              "user_id": "789e0123-e45b-67d8-a901-234567890000"
            }
          ],
          "unread_count": 0
        }
      },
      "CityCode": {
        "type": "string",
        "enum": [
          "TPE",
          "NTP",
          "TAO",
          "TXG",
          "TNN",
          "KHH",
          "KEE",
          "HSZ",
          "CYI",
          "HSQ",
          "MIA",
          "CHA",
          "NAN",
          "YUN",
          "CYQ",
          "PIF",
          "ILA",
          "HUA",
          "TTT",
          "PEN",
          "KIN",
          "LIE"
        ],
        "title": "CityCode",
        "description": "Valid Taiwan city codes for post filtering"
      },
      "CityListResponse": {
        "properties": {
          "cities": {
            "items": {
              "$ref": "#/components/schemas/CityResponse"
            },
            "type": "array",
            "title": "Cities",
            "description": "List of all available Taiwan cities/counties"
          }
        },
        "type": "object",
        "required": [
          "cities"
        ],
        "title": "CityListResponse",
        "description": "Response schema for list of all cities."
      },
      "CityListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/CityListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "CityListResponseWrapper",
        "description": "Response wrapper for city list (standardized envelope)"
      },
      "CityResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "City code (e.g., TPE, NTP, TAO)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "English name (e.g., Taipei City)"
          },
          "name_zh": {
            "type": "string",
            "title": "Name Zh",
            "description": "Chinese name (e.g., å°åŒ—å¸‚)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "name",
          "name_zh"
        ],
        "title": "CityResponse",
        "description": "Response schema for a single city."
      },
      "CommentListResponse": {
        "properties": {
          "comments": {
            "items": {
              "$ref": "#/components/schemas/CommentResponse"
            },
            "type": "array",
            "title": "Comments",
            "description": "List of comments"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of comments"
          }
        },
        "type": "object",
        "required": [
          "comments",
          "total"
        ],
        "title": "CommentListResponse",
        "description": "Response schema for comment list",
        "example": {
          "comments": [
            {
              "content": "Great post! I'm interested!",
              "created_at": "2024-01-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "post_id": "987e6543-e21b-12d3-a456-426614174000",
              "updated_at": "2024-01-01T00:00:00Z",
              "user_avatar_url": "https://example.com/avatar.jpg",
              "user_id": "456e7890-e12b-34d5-a678-901234567000",
              "user_nickname": "KpopFan123"
            }
          ],
          "total": 1
        }
      },
      "CommentListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/CommentListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "CommentListResponseWrapper",
        "description": "Response wrapper for comment list (standardized envelope)"
      },
      "CommentResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Comment ID"
          },
          "post_id": {
            "type": "string",
            "format": "uuid",
            "title": "Post Id",
            "description": "Post ID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID who created the comment"
          },
          "user_nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Nickname",
            "description": "Commenter's nickname from profile"
          },
          "user_avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Avatar Url",
            "description": "Commenter's avatar URL from profile"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Comment content"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "post_id",
          "user_id",
          "content",
          "created_at",
          "updated_at"
        ],
        "title": "CommentResponse",
        "description": "Response schema for comment details",
        "example": {
          "content": "Great post! I'm interested!",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "post_id": "987e6543-e21b-12d3-a456-426614174000",
          "updated_at": "2024-01-01T00:00:00Z",
          "user_avatar_url": "https://example.com/avatar.jpg",
          "user_id": "456e7890-e12b-34d5-a678-901234567000",
          "user_nickname": "KpopFan123"
        }
      },
      "CommentResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/CommentResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "CommentResponseWrapper",
        "description": "Response wrapper for single comment (standardized envelope)"
      },
      "ConfirmUploadResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Media status after confirmation",
            "example": "confirmed"
          },
          "file_size_bytes": {
            "type": "integer",
            "title": "File Size Bytes"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "status",
          "file_size_bytes"
        ],
        "title": "ConfirmUploadResponseSchema",
        "description": "Response schema after confirming upload."
      },
      "CreateCommentRequest": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Content",
            "description": "Comment content",
            "examples": [
              "Great post! I'm interested!"
            ]
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "CreateCommentRequest",
        "description": "Request schema for creating a comment",
        "example": {
          "content": "Great post! I'm interested!"
        }
      },
      "CreateGalleryCardRequest": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Title"
          },
          "idol_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Idol Name"
          },
          "era": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Era"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "title",
          "idol_name"
        ],
        "title": "CreateGalleryCardRequest",
        "description": "Request to create a gallery card."
      },
      "CreateMessageRequestRequest": {
        "properties": {
          "recipient_id": {
            "type": "string",
            "title": "Recipient Id",
            "description": "ID of the recipient user"
          },
          "initial_message": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Initial Message",
            "description": "Initial message content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id",
            "description": "Optional post ID being referenced"
          }
        },
        "type": "object",
        "required": [
          "recipient_id",
          "initial_message"
        ],
        "title": "CreateMessageRequestRequest",
        "description": "Request to create a message request"
      },
      "CreatePostRequest": {
        "properties": {
          "scope": {
            "$ref": "#/components/schemas/PostScope",
            "description": "Post scope: global (visible everywhere) or city (city-specific)",
            "examples": [
              "global",
              "city"
            ]
          },
          "city_code": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CityCode"
              },
              {
                "type": "null"
              }
            ],
            "description": "City code - required when scope=city, must be empty when scope=global",
            "examples": [
              "TPE"
            ]
          },
          "category": {
            "$ref": "#/components/schemas/PostCategory",
            "description": "Post category",
            "examples": [
              "trade",
              "giveaway",
              "group",
              "showcase",
              "help",
              "announcement"
            ]
          },
          "title": {
            "type": "string",
            "maxLength": 120,
            "title": "Title",
            "description": "Post title",
            "examples": [
              "Looking for BTS cards in Taipei"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Post content",
            "examples": [
              "I have Jungkook cards and looking for V cards"
            ]
          },
          "idol": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name for filtering",
            "examples": [
              "Jungkook"
            ]
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group for filtering",
            "examples": [
              "BTS"
            ]
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At",
            "description": "Expiry datetime (defaults to 14 days from now)"
          }
        },
        "type": "object",
        "required": [
          "scope",
          "category",
          "title",
          "content"
        ],
        "title": "CreatePostRequest",
        "description": "Request schema for creating a post (V2: with scope/category)",
        "example": {
          "category": "trade",
          "city_code": "TPE",
          "content": "I have Jungkook cards and looking for V cards",
          "idol": "Jungkook",
          "idol_group": "BTS",
          "scope": "city",
          "title": "Looking for BTS cards in Taipei"
        }
      },
      "CreateUploadUrlRequestSchema": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type of the file (e.g., image/jpeg)",
            "example": "image/jpeg"
          },
          "file_size_bytes": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "File Size Bytes",
            "description": "File size in bytes",
            "example": 1048576
          },
          "filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filename",
            "description": "Original filename",
            "example": "card.jpg"
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "file_size_bytes"
        ],
        "title": "CreateUploadUrlRequestSchema",
        "description": "Request schema for creating upload URL."
      },
      "CreateUploadUrlResponseSchema": {
        "properties": {
          "media_id": {
            "type": "string",
            "format": "uuid",
            "title": "Media Id",
            "description": "Media asset ID for confirmation"
          },
          "upload_url": {
            "type": "string",
            "title": "Upload Url",
            "description": "Presigned URL for uploading file"
          },
          "expires_in_minutes": {
            "type": "integer",
            "title": "Expires In Minutes",
            "description": "URL expiration time in minutes"
          }
        },
        "type": "object",
        "required": [
          "media_id",
          "upload_url",
          "expires_in_minutes"
        ],
        "title": "CreateUploadUrlResponseSchema",
        "description": "Response schema for upload URL."
      },
      "ExpireSubscriptionsData": {
        "properties": {
          "expired_count": {
            "type": "integer",
            "title": "Expired Count",
            "description": "Number of subscriptions expired"
          },
          "processed_at": {
            "type": "string",
            "title": "Processed At",
            "description": "Processing timestamp (ISO format)"
          }
        },
        "type": "object",
        "required": [
          "expired_count",
          "processed_at"
        ],
        "title": "ExpireSubscriptionsData",
        "description": "Data schema for expire subscriptions job",
        "example": {
          "expired_count": 5,
          "processed_at": "2025-12-23T00:00:00"
        }
      },
      "ExpireSubscriptionsResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ExpireSubscriptionsData"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ExpireSubscriptionsResponse",
        "description": "Response wrapper for expire subscriptions (standardized envelope)"
      },
      "GalleryCardListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GalleryCardResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "GalleryCardListResponse",
        "description": "Response for a list of gallery cards."
      },
      "GalleryCardResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "idol_name": {
            "type": "string",
            "title": "Idol Name"
          },
          "era": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Era"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "media_asset_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Media Asset Id"
          },
          "display_order": {
            "type": "integer",
            "title": "Display Order"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "title",
          "idol_name",
          "display_order",
          "created_at",
          "updated_at"
        ],
        "title": "GalleryCardResponse",
        "description": "Response for a single gallery card."
      },
      "GoogleCallbackRequest": {
        "properties": {
          "code": {
            "type": "string",
            "minLength": 1,
            "title": "Code",
            "description": "Authorization code from Google OAuth"
          },
          "code_verifier": {
            "type": "string",
            "maxLength": 128,
            "minLength": 43,
            "title": "Code Verifier",
            "description": "PKCE code verifier used during authorization request"
          },
          "redirect_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Redirect Uri",
            "description": "Redirect URI used during authorization (must match the one used in auth request)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "code_verifier"
        ],
        "title": "GoogleCallbackRequest",
        "description": "Request schema for Google OAuth callback with PKCE (Expo AuthSession)"
      },
      "GoogleCodeLoginRequest": {
        "properties": {
          "code": {
            "type": "string",
            "minLength": 1,
            "title": "Code",
            "description": "Authorization code from Google OAuth"
          },
          "redirect_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Redirect Uri",
            "description": "Redirect URI used during authorization (must match the one used in auth request)"
          }
        },
        "type": "object",
        "required": [
          "code"
        ],
        "title": "GoogleCodeLoginRequest",
        "description": "Request schema for Google OAuth with authorization code (Web flow)"
      },
      "GoogleLoginRequest": {
        "properties": {
          "google_token": {
            "type": "string",
            "minLength": 1,
            "title": "Google Token",
            "description": "Google ID token received from Google OAuth"
          }
        },
        "type": "object",
        "required": [
          "google_token"
        ],
        "title": "GoogleLoginRequest",
        "description": "Request schema for Google login"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IdolGroupListResponse": {
        "properties": {
          "groups": {
            "items": {
              "$ref": "#/components/schemas/IdolGroupResponse"
            },
            "type": "array",
            "title": "Groups",
            "description": "List of all available idol groups for onboarding"
          }
        },
        "type": "object",
        "required": [
          "groups"
        ],
        "title": "IdolGroupListResponse",
        "description": "Response schema for list of all idol groups."
      },
      "IdolGroupListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/IdolGroupListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "IdolGroupListResponseWrapper",
        "description": "Response wrapper for idol group list (standardized envelope)"
      },
      "IdolGroupResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Idol group ID (e.g., newjeans, ive, aespa)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Idol group name (e.g., NewJeans, IVE, aespa)"
          },
          "emoji": {
            "type": "string",
            "title": "Emoji",
            "description": "Emoji representing the idol group (e.g., ðŸ‘–, ðŸ¦¢, ðŸ¦‹)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "emoji"
        ],
        "title": "IdolGroupResponse",
        "description": "Response schema for a single idol group."
      },
      "LoginResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/TokenResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "LoginResponse",
        "description": "Response wrapper for successful login (standardized envelope)"
      },
      "MessageRequestResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "sender_id": {
            "type": "string",
            "title": "Sender Id"
          },
          "recipient_id": {
            "type": "string",
            "title": "Recipient Id"
          },
          "initial_message": {
            "type": "string",
            "title": "Initial Message"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "sender_id",
          "recipient_id",
          "initial_message",
          "post_id",
          "status",
          "thread_id",
          "created_at",
          "updated_at"
        ],
        "title": "MessageRequestResponse",
        "description": "Response for a message request"
      },
      "MessageResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Message ID"
          },
          "room_id": {
            "type": "string",
            "format": "uuid",
            "title": "Room Id",
            "description": "Chat room ID"
          },
          "sender_id": {
            "type": "string",
            "format": "uuid",
            "title": "Sender Id",
            "description": "Sender user ID"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Message content"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Message status",
            "examples": [
              "sent",
              "delivered",
              "read"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "room_id",
          "sender_id",
          "content",
          "status",
          "created_at"
        ],
        "title": "MessageResponse",
        "description": "Response schema for a single message",
        "example": {
          "content": "Hello! I'm interested in trading cards.",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "room_id": "987e6543-e21b-12d3-a456-426614174000",
          "sender_id": "456e7890-e12b-34d5-a678-901234567000",
          "status": "sent"
        }
      },
      "MessageResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/MessageResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "MessageResponseWrapper",
        "description": "Response wrapper for single message (standardized envelope)"
      },
      "MessagesListResponse": {
        "properties": {
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages",
            "description": "List of messages"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of messages"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more messages to fetch"
          }
        },
        "type": "object",
        "required": [
          "messages",
          "total",
          "has_more"
        ],
        "title": "MessagesListResponse",
        "description": "Response schema for list of messages",
        "example": {
          "has_more": false,
          "messages": [
            {
              "content": "Hello!",
              "created_at": "2024-01-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "room_id": "987e6543-e21b-12d3-a456-426614174000",
              "sender_id": "456e7890-e12b-34d5-a678-901234567000",
              "status": "read"
            }
          ],
          "total": 1
        }
      },
      "MessagesListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/MessagesListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "MessagesListResponseWrapper",
        "description": "Response wrapper for message list (standardized envelope)"
      },
      "PostCategory": {
        "type": "string",
        "enum": [
          "trade",
          "giveaway",
          "group",
          "showcase",
          "help",
          "announcement"
        ],
        "title": "PostCategory",
        "description": "Post category enumeration (FR-002)"
      },
      "PostCategoryListResponse": {
        "properties": {
          "categories": {
            "items": {
              "$ref": "#/components/schemas/PostCategoryOption"
            },
            "type": "array",
            "title": "Categories",
            "description": "List of available categories"
          }
        },
        "type": "object",
        "required": [
          "categories"
        ],
        "title": "PostCategoryListResponse",
        "description": "Response schema for category list",
        "example": {
          "categories": [
            {
              "label": "æ±‚æ›",
              "value": "trade"
            },
            {
              "label": "é€å‡º",
              "value": "giveaway"
            }
          ]
        }
      },
      "PostCategoryListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostCategoryListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostCategoryListResponseWrapper",
        "description": "Response wrapper for category list (standardized envelope)"
      },
      "PostCategoryOption": {
        "properties": {
          "value": {
            "type": "string",
            "title": "Value",
            "description": "Category value (enum)"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Category display label (Chinese)"
          }
        },
        "type": "object",
        "required": [
          "value",
          "label"
        ],
        "title": "PostCategoryOption",
        "description": "Schema for a single category option",
        "example": {
          "label": "æ±‚æ›",
          "value": "trade"
        }
      },
      "PostListResponse": {
        "properties": {
          "posts": {
            "items": {
              "$ref": "#/components/schemas/PostResponse"
            },
            "type": "array",
            "title": "Posts",
            "description": "List of posts"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of posts"
          }
        },
        "type": "object",
        "required": [
          "posts",
          "total"
        ],
        "title": "PostListResponse",
        "description": "Response schema for post list",
        "example": {
          "posts": [
            {
              "category": "trade",
              "city_code": "TPE",
              "content": "I have Jungkook cards",
              "created_at": "2024-01-01T00:00:00Z",
              "expires_at": "2024-02-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "idol": "Jungkook",
              "idol_group": "BTS",
              "owner_id": "987e6543-e21b-12d3-a456-426614174000",
              "scope": "city",
              "status": "open",
              "title": "Looking for BTS cards",
              "updated_at": "2024-01-01T00:00:00Z"
            }
          ],
          "total": 1
        }
      },
      "PostListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostListResponseWrapper",
        "description": "Response wrapper for post list (standardized envelope)"
      },
      "PostResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Post ID"
          },
          "owner_id": {
            "type": "string",
            "format": "uuid",
            "title": "Owner Id",
            "description": "Owner user ID"
          },
          "owner_nickname": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner Nickname",
            "description": "Owner's nickname from profile"
          },
          "owner_avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner Avatar Url",
            "description": "Owner's avatar URL from profile"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "description": "Post scope (global/city)"
          },
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code",
            "description": "City code (if scope=city)"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Post category"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Post title"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Post content"
          },
          "idol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol",
            "description": "Idol name"
          },
          "idol_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idol Group",
            "description": "Idol group"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Post status",
            "examples": [
              "open",
              "closed",
              "expired",
              "deleted"
            ]
          },
          "like_count": {
            "type": "integer",
            "title": "Like Count",
            "description": "Total number of likes on this post",
            "default": 0
          },
          "liked_by_me": {
            "type": "boolean",
            "title": "Liked By Me",
            "description": "Whether the current user has liked this post",
            "default": false
          },
          "media_asset_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Media Asset Ids",
            "description": "List of media asset IDs attached to this post (Phase 9)"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At",
            "description": "Expiry datetime"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "owner_id",
          "scope",
          "category",
          "title",
          "content",
          "status",
          "expires_at",
          "created_at",
          "updated_at"
        ],
        "title": "PostResponse",
        "description": "Response schema for post details (V2: with scope/category + like fields)",
        "example": {
          "category": "trade",
          "city_code": "TPE",
          "content": "I have Jungkook cards and looking for V cards",
          "created_at": "2024-01-01T00:00:00Z",
          "expires_at": "2024-02-01T00:00:00Z",
          "id": "123e4567-e89b-12d3-a456-426614174000",
          "idol": "Jungkook",
          "idol_group": "BTS",
          "like_count": 5,
          "liked_by_me": true,
          "owner_id": "987e6543-e21b-12d3-a456-426614174000",
          "scope": "city",
          "status": "open",
          "title": "Looking for BTS cards in Taipei",
          "updated_at": "2024-01-01T00:00:00Z"
        }
      },
      "PostResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PostResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "PostResponseWrapper",
        "description": "Response wrapper for single post (standardized envelope)"
      },
      "PostScope": {
        "type": "string",
        "enum": [
          "global",
          "city"
        ],
        "title": "PostScope",
        "description": "Post scope enumeration (FR-003)"
      },
      "ProfileResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Profile ID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Profile creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Profile last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "created_at",
          "updated_at"
        ],
        "title": "ProfileResponse",
        "description": "Response schema for user profile",
        "example": {
          "avatar_url": "https://example.com/avatar.jpg",
          "bio": "Love collecting K-pop cards!",
          "created_at": "2024-01-01T00:00:00Z",
          "id": "987e6543-e21b-12d3-a456-426614174000",
          "nickname": "CardCollector",
          "preferences": {
            "language": "ko",
            "theme": "dark"
          },
          "privacy_flags": {
            "allow_stranger_chat": false,
            "show_online": true
          },
          "region": "Seoul",
          "updated_at": "2024-01-15T12:30:00Z",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "ProfileResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProfileResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ProfileResponseWrapper",
        "description": "Response wrapper for profile data (standardized envelope)"
      },
      "ReadMediaUrlsRequest": {
        "properties": {
          "media_asset_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 50,
            "minItems": 1,
            "title": "Media Asset Ids",
            "description": "List of media asset IDs to get read URLs for",
            "examples": [
              [
                "123e4567-e89b-12d3-a456-426614174000"
              ]
            ]
          }
        },
        "type": "object",
        "required": [
          "media_asset_ids"
        ],
        "title": "ReadMediaUrlsRequest",
        "description": "Request schema for batch reading media signed URLs."
      },
      "ReadMediaUrlsResponse": {
        "properties": {
          "urls": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Urls",
            "description": "Mapping of media_id to signed read URL",
            "examples": [
              {
                "123e4567-e89b-12d3-a456-426614174000": "https://storage.googleapis.com/..."
              }
            ]
          },
          "expires_in_minutes": {
            "type": "integer",
            "title": "Expires In Minutes",
            "description": "URL expiration time in minutes (all URLs have same expiration)",
            "example": 10
          }
        },
        "type": "object",
        "required": [
          "urls",
          "expires_in_minutes"
        ],
        "title": "ReadMediaUrlsResponse",
        "description": "Response schema for batch reading media signed URLs."
      },
      "ReadMediaUrlsResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ReadMediaUrlsResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ReadMediaUrlsResponseWrapper",
        "description": "Envelope wrapper for read media URLs response."
      },
      "RefreshSuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates successful refresh",
            "default": true
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message",
            "default": "Tokens refreshed successfully"
          }
        },
        "type": "object",
        "title": "RefreshSuccessResponse",
        "description": "Response for successful token refresh (cookie-based)"
      },
      "ReorderGalleryCardsRequest": {
        "properties": {
          "card_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "minItems": 1,
            "title": "Card Ids"
          }
        },
        "type": "object",
        "required": [
          "card_ids"
        ],
        "title": "ReorderGalleryCardsRequest",
        "description": "Request to reorder gallery cards."
      },
      "ReorderGalleryCardsResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "default": "Gallery cards reordered successfully"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count"
          }
        },
        "type": "object",
        "required": [
          "updated_count"
        ],
        "title": "ReorderGalleryCardsResponse",
        "description": "Response after reordering gallery cards."
      },
      "ReportListResponse": {
        "properties": {
          "reports": {
            "items": {
              "$ref": "#/components/schemas/ReportResponse"
            },
            "type": "array",
            "title": "Reports",
            "description": "List of reports"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of reports"
          }
        },
        "type": "object",
        "required": [
          "reports",
          "total"
        ],
        "title": "ReportListResponse",
        "description": "Response schema for list of reports"
      },
      "ReportListResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ReportListResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ReportListResponseWrapper",
        "description": "Response wrapper for report list (standardized envelope)"
      },
      "ReportReason": {
        "type": "string",
        "enum": [
          "fraud",
          "fake_card",
          "harassment",
          "inappropriate_content",
          "spam",
          "other"
        ],
        "title": "ReportReason",
        "description": "Report reason enumeration"
      },
      "ReportRequest": {
        "properties": {
          "reported_user_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reported User Id",
            "description": "ID of user being reported",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          },
          "reason": {
            "$ref": "#/components/schemas/ReportReason",
            "description": "Reason for report (must be one of: fraud, fake_card, harassment, inappropriate_content, spam, other)",
            "examples": [
              "harassment"
            ]
          },
          "detail": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail",
            "description": "Detailed description of the issue",
            "examples": [
              "User sent inappropriate messages and refused to complete trade."
            ]
          }
        },
        "type": "object",
        "required": [
          "reported_user_id",
          "reason"
        ],
        "title": "ReportRequest",
        "description": "Request schema for submitting a report"
      },
      "ReportResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "Report ID"
          },
          "reporter_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reporter Id",
            "description": "User who filed the report"
          },
          "reported_user_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reported User Id",
            "description": "User who was reported"
          },
          "reason": {
            "$ref": "#/components/schemas/ReportReason",
            "description": "Reason for report"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail",
            "description": "Detailed description"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Report status",
            "examples": [
              "pending",
              "reviewed",
              "resolved"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "reporter_id",
          "reported_user_id",
          "reason",
          "status",
          "created_at"
        ],
        "title": "ReportResponse",
        "description": "Response schema for a report"
      },
      "ReportResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ReportResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ReportResponseWrapper",
        "description": "Response wrapper for single report (standardized envelope)"
      },
      "SubscriptionStatusData": {
        "properties": {
          "plan": {
            "type": "string",
            "title": "Plan",
            "description": "Subscription plan: 'free' or 'premium'"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Subscription status: 'active', 'inactive', 'expired', 'pending'"
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At",
            "description": "Expiry datetime (ISO format)"
          },
          "entitlement_active": {
            "type": "boolean",
            "title": "Entitlement Active",
            "description": "Whether user has active premium entitlement"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Subscription source: 'google_play'"
          }
        },
        "type": "object",
        "required": [
          "plan",
          "status",
          "entitlement_active",
          "source"
        ],
        "title": "SubscriptionStatusData",
        "description": "Data schema for subscription status",
        "example": {
          "entitlement_active": true,
          "expires_at": "2025-12-31T23:59:59",
          "plan": "premium",
          "source": "google_play",
          "status": "active"
        }
      },
      "SubscriptionStatusResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SubscriptionStatusData"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "SubscriptionStatusResponse",
        "description": "Response wrapper for subscription status (standardized envelope)"
      },
      "ThreadListResponse": {
        "properties": {
          "threads": {
            "items": {
              "$ref": "#/components/schemas/ThreadResponse"
            },
            "type": "array",
            "title": "Threads"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "threads",
          "total"
        ],
        "title": "ThreadListResponse",
        "description": "Response for list of threads"
      },
      "ThreadMessageResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "thread_id": {
            "type": "string",
            "title": "Thread Id"
          },
          "sender_id": {
            "type": "string",
            "title": "Sender Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "thread_id",
          "sender_id",
          "content",
          "post_id",
          "created_at"
        ],
        "title": "ThreadMessageResponse",
        "description": "Response for a thread message"
      },
      "ThreadMessagesResponse": {
        "properties": {
          "messages": {
            "items": {
              "$ref": "#/components/schemas/ThreadMessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "messages",
          "total"
        ],
        "title": "ThreadMessagesResponse",
        "description": "Response for list of messages in a thread"
      },
      "ThreadResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_a_id": {
            "type": "string",
            "title": "User A Id"
          },
          "user_b_id": {
            "type": "string",
            "title": "User B Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "last_message_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Message At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_a_id",
          "user_b_id",
          "created_at",
          "updated_at",
          "last_message_at"
        ],
        "title": "ThreadResponse",
        "description": "Response for a message thread"
      },
      "ToggleLikeResponse": {
        "properties": {
          "liked": {
            "type": "boolean",
            "title": "Liked",
            "description": "Whether the post is now liked by the user"
          },
          "like_count": {
            "type": "integer",
            "title": "Like Count",
            "description": "Current total like count for the post"
          }
        },
        "type": "object",
        "required": [
          "liked",
          "like_count"
        ],
        "title": "ToggleLikeResponse",
        "description": "Response schema for toggle like action",
        "example": {
          "like_count": 6,
          "liked": true
        }
      },
      "ToggleLikeResponseWrapper": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ToggleLikeResponse"
          },
          "meta": {
            "type": "null",
            "title": "Meta"
          },
          "error": {
            "type": "null",
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "ToggleLikeResponseWrapper",
        "description": "Response wrapper for toggle like response (standardized envelope)"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiration in seconds"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email"
          },
          "role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role",
            "description": "User role (only for admin users)"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in",
          "user_id",
          "email"
        ],
        "title": "TokenResponse",
        "description": "Response schema for authentication tokens",
        "example": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "email": "user@example.com",
          "expires_in": 900,
          "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "role": "admin",
          "token_type": "bearer",
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "UnblockUserRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ID of user to unblock",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "UnblockUserRequest",
        "description": "Request schema for unblocking a user",
        "example": {
          "user_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "UpdateProfileRequest": {
        "properties": {
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "User nickname"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url",
            "description": "Avatar image URL"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio",
            "description": "User bio/description"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "User region"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences (JSON)"
          },
          "privacy_flags": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "boolean"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy Flags",
            "description": "Privacy settings"
          }
        },
        "type": "object",
        "title": "UpdateProfileRequest",
        "description": "Request schema for updating user profile",
        "example": {
          "bio": "Updated bio",
          "nickname": "NewNickname",
          "privacy_flags": {
            "allow_stranger_chat": true,
            "show_online": false
          }
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VerifyReceiptRequest": {
        "properties": {
          "platform": {
            "type": "string",
            "title": "Platform",
            "description": "Platform: 'android' or 'ios'"
          },
          "purchase_token": {
            "type": "string",
            "title": "Purchase Token",
            "description": "Purchase token from Google Play"
          },
          "product_id": {
            "type": "string",
            "title": "Product Id",
            "description": "Product/SKU ID"
          }
        },
        "type": "object",
        "required": [
          "platform",
          "purchase_token",
          "product_id"
        ],
        "title": "VerifyReceiptRequest",
        "description": "Request schema for verifying purchase receipt",
        "example": {
          "platform": "android",
          "product_id": "premium_monthly",
          "purchase_token": "abc123xyz..."
        }
      },
      "app__modules__social__presentation__schemas__chat_schemas__SendMessageRequest": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Content",
            "description": "Message content",
            "examples": [
              "Hello! I'm interested in trading cards."
            ]
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "SendMessageRequest",
        "description": "Request schema for sending a message",
        "example": {
          "content": "Hello! I'm interested in trading cards."
        }
      },
      "app__modules__social__presentation__schemas__message_schemas__SendMessageRequest": {
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Content",
            "description": "Message content"
          },
          "post_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Post Id",
            "description": "Optional post ID to reference"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "SendMessageRequest",
        "description": "Request to send a message in a thread"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}